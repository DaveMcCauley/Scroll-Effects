<!DOCTYPE html>

<html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>

  <style>
    body,
    div,
    html {
      margin: 0;
    }

    div {
      box-sizing: border-box;
    }

    .u_fixed {
      position: fixed !important;
      top: 0;
      width: 50%;

    }

    section {
     display: -webkit-flex;
     display: flex;
     flex-flow: row wrap;
     text-align: left;
     min-height: 100vh;
    }


  .img-container.u_fixed {
      overflow: hidden;
      width: 50%;
    }


      .left-container {
        text-align: left;
        -webkit-flex: 1 50%;
        flex: 1 50%;
        -webkit-order: 1;
        order: 1;
        z-index: -1;
        background: #eee;
        overflow: hidden;
      }
      .right-container {
        -webkit-flex:1 50%;
        flex: 1 50%;
        -webkit-order: 2;
        order:2;
        z-index: -1;
        overflow: hidden;
        background: #eee;
      }
      .img-container {
        overflow: hidden;
      }
      .bang-img {
        height: 100vh;
        position: relative;
        overflow: hidden;
        min-width: 100%;


      }


  </style>
</head>

<body>

<section class="container">
  <div class="left-container">
    <div class="img-container">
      <img class="bang-img" src="assets/img/sample-two.jpg">
    </div>
  </div>
  <div class="right-container">
    <h1>FIRST CONTAINER HEADLINE IT'S HUUUUUGE!!</h1>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
        Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
  </div>
</section>

<section class="container">
  <div class="left-container">
    <div class="img-container">
      <img class="bang-img" src="assets/img/sample-one.jpg">
    </div>
  </div>
  <div class="right-container">
    <h1>SECOND CONTAINER HEADLINE IT'S HUUUUUGE!!</h1>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
        Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
        Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
     Right Container<br>
    Right Container<br>
        Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    UNGA BUNGA!!
  </div>
</section>

<section class="container">
  <div class="left-container">
    <h1>THIRD CONTAINER HEADLINE IT'S HUUUUUGE!!</h1>
    Left Container<br>
    Left Container<br>
    Left Container<br>
    Left Container<br>
    Left Container<br>
    Left Container<br>
    Left Container<br>
    Left Container<br>
    Left Container<br>
    Left Container<br>
    Left Container<br>
    Left Container<br>
        Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
        Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
    Right Container<br>
  </div>
  <div class="right-container">
    <div class="img-container">
      <img class="bang-img" src="assets/img/sample-three.jpg">
    </div>
  </div>
</section>

</body>

<script>

// persistant global to track the position of each section's displacement
var prevDisplace = [];

$(window).scroll(function() {
  console.log('scroll()');
  $('section').each(function(index, value) {

  console.log('section.each(' + index + ')');

  // get the offsets. Notice we are detecting the shift
  // of the top of the section relative to the window.
  var window_top = $(window).scrollTop();
  var section_top = $(this).offset().top;
  var displace = window_top - section_top;

  console.log('\t window_top:' + window_top);
  console.log('\t section_top:' + section_top);
  console.log('\t displace:' + displace);

  // get the children. TODO: Optimise and eliminate
  var objLeft = $(this).children('.left-container');
  var objRight = $(this).children('.right-container');
  var objImage = objLeft.children('.img-container');

  // get some sizes and values
  var rightSideHeight = objRight.outerHeight(true);
  var leftSideHeight = objLeft.outerHeight(true);
  var largerHeight = Math.max(rightSideHeight,leftSideHeight);
  console.log('\t rightSideHeight:' + rightSideHeight);
  console.log('\t leftSideHeight: ' + leftSideHeight);
  console.log('\t largerHeight:   ' + largerHeight);

  // condition the scroll, would a switch be better?
  if(displace < 0) {
    // the section is below the top of visible vp, so it appears
    // inline and scrolls normally.
    objImage.removeClass('u_fixed');
  }
  else if (displace < largerHeight) {
    // the section is at the top and the left panel is locked.
    objImage.addClass('u_fixed');
    prevDisplace[index]=displace;
  }
  else {
    // the section is off the top.
    // todo: fade?
  }

  });
});




</script>

</html>
