<!DOCTYPE html>

<html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>

  <style>
    body,
    div,
    html {
      margin: 0;
    }

    .u_fixed {
      position: fixed !important;
      top: 0;
      width: 50%;
    }

    section {
      width: 100%;
      clear: both;
    }

    article {
      position: relative;
      text-align: center;
    }

    .left-half {
      background: transparent;
      float: left;
      width: 50%;
      height: 100vh;
      overflow: hidden;
      postition: realtive;
      z-index: -10;
    }

    .left-img.u_fixed {
      width: 50%;
      overflow: hidden;
    }

    .right-half {
      background-color: #aaa;
      float: left;
      width: 50%;
    }

    .left-img {
      opacity: 1.0;
      overflow: hidden;
      z-index: -1;

    }

    .left-img-img {
      overflow: hidden;
      position: relative;

      min-width: 100%;
      height: 100vh;

    }

  </style>
</head>

<body>

<section id="uno" class="container">
  <div id="uno-header" class = "left-half">
    <div class="left-img">
      <img class="left-img-img" src="assets/img/sample-one.jpg">
    </div>
  </div>
  <div class="right-half">
    <p>Uno bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
  </div>
</section>

<section id="dos" class="container">
  <div id="dos-header" class = "left-half">
    <div class="left-img">
      <img class="left-img-img" src="assets/img/sample-two.jpg">
    </div>
  </div>
  <div class="right-half">
    <p>Dos bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
  </div>
</section>

<section id="tres" class="container">
  <div id="tres-header" class = "left-half">
    <div class="left-img">
      <img class="left-img-img" src="assets/img/sample-three.jpg">
    </div>
  </div>
  <div class="right-half">
    <p>Tres bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>

  </div>
</section>

<section id="fo" class="container">
  <div id="fo-header" class = "left-half">
    <div class="left-img">
      <img class="left-img-img" src="assets/img/sample-two.jpg">
    </div>
  </div>
  <div class="right-half">
    <p>Fo bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
    <p>Unga bunga</p>
  </div>
</section>

</body>


<script>


// global to track the position of each section's displacement
var prevDisplace = [];

$(window).scroll(function() {
  console.log('scroll()');
  $('section').each(function(index, value) {

  console.log('section.each(' + index + ')');

  // get the offsets. Notice we are detecting the shift
  // of the top of the section relative to the window.
  var window_top = $(window).scrollTop();
  var section_top = $(this).offset().top;
  var displace = window_top - section_top;

  console.log('\t window_top:' + window_top);
  console.log('\t section_top:' + section_top);
  console.log('\t displace:' + displace);

  // get the children. TODO: Optimise and eliminate
  var objLeft = $(this).children('.left-half');
  var objRight = $(this).children('.right-half');
  var objImage = objLeft.children('.left-img');

  // get some sizes and values
  var rightSideHeight = objRight.outerHeight(true);
  console.log('\t rightSideHeight:' + rightSideHeight);

  // condition the scroll, would a switch be better?
  if(displace < 0) {
    // the section is below the top of visible vp, so it appears
    // inline and scrolls normally.
    objImage.removeClass('u_fixed');
  }
  else if (displace < rightSideHeight) {
    // the section is at the top and the left panel is locked.
    objImage.addClass('u_fixed');
    prevDisplace[index]=displace;
  }
  else {
    // the section is off the top.
    // todo: fade?
  }

  });
});

// http://jsfiddle.net/audetwebdesign/y2L3Q/

</script>

</html>
